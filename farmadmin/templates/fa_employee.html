{% extends "fa_layout.html" %}
{% load staticfiles %}
{% load i18n %}

{% block page %}
<style>
table.datatable tr {
    font-size: 0.9rem;
    font-weight: 400;
    line-height: 0.9rem;
}

.rowGrayed {
    background-color: #a9a9a9; !important;
    font-style: italic;
}

</style>

<div class="container-fluid px-4">
<div class="row">
<div class="col-12">

<div class="row">
      <div class="form-group col-lg-3 col-md-4 col-sm-6">
        <label for="nameInput">Сотрудник</label>
        <input type="text" class="form-control" id="nameInput" placeholder="" value="{{ object.name }}">
      </div>

      <div class="form-group col-lg-3 col-md-4 col-sm-6">
        <label for="parentSelect">Руководитель</label>
        <select class="form-control" id="parentSelect">
           {% for p in parents %}
               <option value="{{ p.id }}" {% if p == object.parent %}selected{% endif %}>{{ p.name }}</option>
           {% endfor %}
        </select>
      </div>
</div>
<div class="row">
      <div class="form-group col-lg-3 col-md-4 col-sm-6">
        <div class="form-check">
          <input class="form-check-input" type="checkbox" value="" id="isTarget" {% if object.istarget %}checked{% endif %}>
          <label class="form-check-label" for="isTarget">
            Показывать как таргет
          </label>
        </div>
      </div>
</div>
<br>
<b>ГРУЗОПОЛУЧАТЕЛИ:</b><br>
{% include "fa_lpue.html" %}

<br>
<b>ПРИВЯЗАННЫЕ АККАУНТЫ:</b><br>
{% for u in object.users.all %}
    {{ u.username }} <br>
{% endfor %}
<br>
<hr>
<div class="row">
    <div class="float-right">
            <a href="{% url 'farmadmin:employees' %}" role="button" class="btn btn-secondary">Выйти без сохранения</a>
            <a role="button" class="btn btn-primary" id="emplSubmit">Сохранить</a>
     </div>
</div>

<script>
    $("#emplSubmit").on('click', function(){
        $.post( "{%  url 'farmadmin:employees' %}", {
            "empl_id": {{ object_id }},
            "name": $("#nameInput").val(),
            "name": $("#nameInput").val(),
            "parent_id": $("#parentSelect").val(),
            "lpu": tblLpuEmp.column(0).toArray()
        });
    });
</script>
</div>
</div>
</div>


{% endblock %}